{"version":3,"sources":["webpack:///./templates/card-film.hbs","webpack:///./templates/gallery-item-template.hbs","webpack:///./apiServises/api.js","webpack:///./js/refs.js","webpack:///./js/update-markup.js","webpack:///./js/fetch-films.js","webpack:///./js/search-films.js","webpack:///./js/FooterModalHandler/FooterModalHandler.js","webpack:///./js/main.js","webpack:///./js/update-gallery-markup.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop","apiKey","axios","defaults","baseURL","searchQuery","page","getUpdatedFilms","getFullFilmsInfoByQuery","filmsData","films","map","updatedFilms","updateInfo","console","log","searchUrl","query","getFilmiIdList","idList","promises","id","get","Promise","all","getUpdatedPopularFilms","getFullPopularFilms","film","showFilmDetails","url","results","filmIdList","reduce","filmsList","release_date","slice","genres","name","push","getGenre","genresList","genre","index","this","search","resetPage","refs","searchForm","document","querySelector","gallery","galleryContainer","updateGalleryMarkup","markup","filmCardTpl","insertAdjacentHTML","fetchFilms","api","then","addEventListener","event","preventDefault","form","currentTarget","elements","value","textContent","MicroModal","init","onShow","modal","info","onClose","openTrigger","closeTrigger","openClass","disableScroll","disableFocus","awaitOpenAnimation","awaitCloseAnimation","debugMode","footerModalHandler","selector","show","apiService"],"mappings":"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","file":"main.81152cf186da7d4e44b5.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"gallery__film grid__item\\\" data-id:\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"id\") || (depth0 != null ? lookupProperty(depth0,\"id\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":45},\"end\":{\"line\":2,\"column\":51}}}) : helper)))\n    + \">\\r\\n    <img class=\\\"gallery-film__image\\\" src=\\\"https://www.themoviedb.org/t/p/w220_and_h330_face/\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"poster_path\") || (depth0 != null ? lookupProperty(depth0,\"poster_path\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"poster_path\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":92},\"end\":{\"line\":3,\"column\":107}}}) : helper)))\n    + \"\\\"\\r\\n        alt=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"original_title\") || (depth0 != null ? lookupProperty(depth0,\"original_title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"original_title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":13},\"end\":{\"line\":4,\"column\":31}}}) : helper)))\n    + \"\\\">\\r\\n    <h2 class=\\\"gallery-film__title\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"original_title\") || (depth0 != null ? lookupProperty(depth0,\"original_title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"original_title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":36},\"end\":{\"line\":5,\"column\":54}}}) : helper)))\n    + \"</h2>\\r\\n    <span class=\\\"gallery-film__features\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"genres\") || (depth0 != null ? lookupProperty(depth0,\"genres\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"genres\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":41},\"end\":{\"line\":6,\"column\":51}}}) : helper)))\n    + \" | \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"release_date\") || (depth0 != null ? lookupProperty(depth0,\"release_date\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"release_date\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":54},\"end\":{\"line\":6,\"column\":70}}}) : helper)))\n    + \" \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"vote_average\") || (depth0 != null ? lookupProperty(depth0,\"vote_average\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"vote_average\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":71},\"end\":{\"line\":6,\"column\":87}}}) : helper)))\n    + \"\\r\\n    </span>\\r\\n</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":9,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"grid__item\\\">\\r\\n    <img src=\\\"https://themoviedb.org/t/p/w220_and_h330_face\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"poster_path\") || (depth0 != null ? lookupProperty(depth0,\"poster_path\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"poster_path\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":59},\"end\":{\"line\":3,\"column\":74}}}) : helper)))\n    + \"\\\" alt=\\\"\\\" />\\r\\n    <h3 class=\\\"film__title\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":28},\"end\":{\"line\":4,\"column\":37}}}) : helper)))\n    + \"</h3>\\r\\n    <span class=\\\"film__text\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"genres\") || (depth0 != null ? lookupProperty(depth0,\"genres\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"genres\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":29},\"end\":{\"line\":5,\"column\":39}}}) : helper)))\n    + \" | \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"release_date\") || (depth0 != null ? lookupProperty(depth0,\"release_date\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"release_date\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":42},\"end\":{\"line\":5,\"column\":58}}}) : helper)))\n    + \"</span>\\r\\n</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":7,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});","import axios from 'axios';\r\n\r\nconst apiKey = '44fd846a8fbd886b31f763260ef2b77b';\r\naxios.defaults.baseURL = 'https://api.themoviedb.org/3';\r\nexport default {\r\n  searchQuery: '',\r\n  page: 1,\r\n\r\n  async getUpdatedFilms() {\r\n    try {\r\n      // отримуємо масив результатів запитів для отримання повної інформації про фільми\r\n      const filmsData = await this.getFullFilmsInfoByQuery();\r\n      // проходимося по отриманому масиві і вибираємо всі об'єкти з повною інформацією про фільми\r\n      const films = filmsData.map(({ data }) => data);\r\n      // Для кожного об'єкта оновлюємо необхідну в ньому інформацію\r\n      const updatedFilms = this.updateInfo(films);\r\n      return updatedFilms;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  },\r\n  // Функція повертає всю інформацію по id фільма, знайденого за query\r\n  async getFullFilmsInfoByQuery() {\r\n    try {\r\n      // створюємо запит для пошуку, який повертає масив об'єктів знайдених фільмів\r\n      const searchUrl = `/search/movie?api_key=44fd846a8fbd886b31f763260ef2b77b&language=en-US&query==${this.query}&page=${this.page}&include_adult=false`;\r\n      // Вибираємо id всіх отриманих об'єктів масиву\r\n      const idList = await this.getFilmiIdList(searchUrl);\r\n      // для кожного об'єкта, за його id, робимо ще один запит для отримання повної інформації про фільм\r\n      const promises = idList.map(id =>\r\n        axios.get(`movie/${id}?api_key=${apiKey}&language=en-US`),\r\n      );\r\n      // отримуємо масив промісів з об'єктами, в яких є повна інформація про фільм\r\n      const films = await Promise.all(promises);\r\n      // Не знаю чи тут збільшується сторінка, вже голова не варить😃\r\n      this.page += 1;\r\n      return films;\r\n    } catch (error) {}\r\n  },\r\n\r\n  // getUpdatedPopularFilms -  вывод популярных фильмов за неделю\r\n  async getUpdatedPopularFilms() {\r\n    try {\r\n      const filmsData = await this.getFullPopularFilms();\r\n      const films = filmsData.map(({ data }) => data);\r\n      const updatedFilms = this.updateInfo(films);\r\n      return updatedFilms;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  },\r\n\r\n  async getFullPopularFilms() {\r\n    try {\r\n      const searchUrl = `/trending/movie/day?api_key=${apiKey}&page=${this.page}`;\r\n      const idList = await this.getFilmiIdList(searchUrl);\r\n      const promises = idList.map(id =>\r\n        axios.get(`movie/${id}?api_key=${apiKey}&language=en-US`),\r\n      );\r\n      const film = await Promise.all(promises);\r\n      // Не знаю чи тут збільшується сторінка, вже голова не варить😃\r\n      //вроде увеличивается, но в нетворке приходит одна и та же страница,надо с пагинацией уже делать этот момент,непонятно пока\r\n      this.page += 1;\r\n      return film;\r\n    } catch (error) {}\r\n  },\r\n\r\n  //showFilmDetails(id) - показ детальной инфы о фильме при показе модалке, айдишник добавлен в ли каждого фильма data-id\r\n  async showFilmDetails(id) {\r\n    try {\r\n      const { data } = await axios.get(\r\n        `/movie/${id}?api_key=${apiKey}&language=en-US`,\r\n      );\r\n\r\n      return data;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  },\r\n\r\n   // Функція повертає id всіх фільмів\r\n  async getFilmiIdList(url) {\r\n    try {\r\n      const { data } = await axios.get(url);\r\n      const { results } = await data;\r\n      const filmIdList = results.map(({ id }) => id);\r\n      return filmIdList;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  },\r\n\r\n  // Функція отримує масив об'єктів з повною інформацією про фільми, оновлює необхідні дані для ставки в шаблон і повертає новий масив об'єктів з необхідними даними\r\n  updateInfo(data) {\r\n    // проходимося по масиву об'єктів, для кожного об'єкта робимо необхідні зміни і додаємо їх в новий масив\r\n    const updatedInfo = data.reduce((filmsList, film) => {\r\n      // перетворюємо release_date в формат '***' (рік)\r\n      film.release_date = film.release_date.slice(0, -6);\r\n      // перетворюємо масив об'єктів з жанрами з формате [{ id: name},..., { id: name} ] в формат [name, ..., name]\r\n      film.genres = film.genres.map(({ name }) => name);\r\n      // додаємо змінені об'єкти в  масив\r\n      filmsList.push(film);\r\n      return filmsList;\r\n    }, []);\r\n    return updatedInfo;\r\n  },\r\n\r\n  //согласно макета если жанров 3 -высвечиваются все 3 жанра,если больше - 2 слова плюс Other\r\n  getGenre(genres) {\r\n    const result = genres.reduce((genresList, genre, index) => {\r\n      const { name } = genre;\r\n      if (index === 3) {\r\n        const tooManyGenres = 'Other';\r\n        genresList[2] = tooManyGenres;\r\n        return genresList;\r\n      } else if (index > 3) {\r\n        return genresList;\r\n      }\r\n\r\n      genresList.push(name);\r\n      return genresList;\r\n    }, []);\r\n\r\n    return result;\r\n  },\r\n\r\n  get query() {\r\n    return this.searchQuery;\r\n  },\r\n  set query(search) {\r\n    this.searchQuery = search;\r\n  },\r\n\r\n  resetPage() {\r\n    this.page = 1;\r\n  },\r\n};\r\n","const refs = {\r\n  searchForm: document.querySelector('#search-form'),\r\n  gallery: document.querySelector('.js-gallery'),\r\n  galleryContainer: document.querySelector('.gallery__list'),\r\n};\r\n\r\nexport default refs;\r\n\r\n","import filmCardTpl from '../templates/gallery-item-template.hbs';\r\nimport refs from './refs';\r\n\r\nfunction updateGalleryMarkup(films) {\r\n  const markup = filmCardTpl(films);\r\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\r\n  return markup;\r\n}\r\n\r\nexport default updateGalleryMarkup;\r\n","import updateGalleryMarkup from './update-markup';\r\nimport api from '../apiServises/api';\r\nfunction fetchFilms() {\r\n  api.getUpdatedFilms().then(films => updateGalleryMarkup(films));\r\n}\r\nexport default fetchFilms;\r\n","import api from '../apiServises/api';\r\nimport fetchFilms from './fetch-films';\r\nimport refs from './refs';\r\nrefs.searchForm.addEventListener('submit', onFormSubmit);\r\n\r\nfunction onFormSubmit(event) {\r\n  event.preventDefault();\r\n  const form = event.currentTarget;\r\n  api.query = form.elements.query.value;\r\n  refs.gallery.textContent = '';\r\n  api.resetPage();\r\n  fetchFilms();\r\n}\r\n","// Рендер модали футера\r\n\r\nimport MicroModal from 'micromodal';\r\n\r\nMicroModal.init({\r\n  onShow: modal => console.info(`${modal.id} is shown`), // [1]\r\n  onClose: modal => console.info(`${modal.id} is hidden`), // [2]\r\n  openTrigger: 'data-custom-open', // [3]\r\n  closeTrigger: 'data-custom-close', // [4]\r\n  openClass: 'is-open', // [5]\r\n  disableScroll: true, // [6]\r\n  disableFocus: true, // [7]\r\n  awaitOpenAnimation: true, // [8]\r\n  awaitCloseAnimation: true, // [9]\r\n  debugMode: true, // [10]\r\n});\r\n\r\nfunction footerModalHandler(selector) {\r\n  const studentsButton = document.querySelector(selector);\r\n\r\n  function onOpen() {\r\n    MicroModal.show('modal-1');\r\n  }\r\n\r\n  studentsButton.addEventListener('click', () => onOpen(selector));\r\n}\r\n\r\nexport default footerModalHandler;\r\n","import footerModalHandler from './FooterModalHandler/FooterModalHandler';\r\nimport apiService from '../apiServises/api';\r\nimport { updateGalleryMarkup } from './update-gallery-markup';\r\n\r\nfooterModalHandler('#students');\r\n\r\n//для проверки данных\r\napiService.getUpdatedPopularFilms().then(updateGalleryMarkup);\r\n\r\n\r\n\r\n\r\n","import template from '../templates/card-film.hbs';\r\nimport refs from './refs';\r\n\r\nexport function updateGalleryMarkup(films) {\r\n  const markup = template(films);\r\n\r\n  refs.galleryContainer.insertAdjacentHTML('beforeend', markup);\r\n}\r\n"],"sourceRoot":""}